import React, { useState } from 'react'
import { Map, TileLayer } from 'react-leaflet'
import Polygon from '../common/Polygon'
import { EPSG3879, formatGeoJSONToPositions, helsinkiCenter } from '../../utils/mapUtils'

function Geometry() {
  
  const coordinates = [
    [
      [
        [60.162685269542017, 24.855603613827039],
        [60.162703397252926, 24.855597127902374],
        [60.162721895524299, 24.855591789825205],
        [60.162740691754145, 24.855587620547336],
        [60.162759712167819, 24.855584636430645],
        [60.162778882113997, 24.855582849188515],
        [60.16279812635571, 24.85558226583581],
        [60.162817369359715, 24.855582888662411],
        [60.162973458732836, 24.85559341317887],
        [60.163035018461429, 24.855699466142454],
        [60.163104580393529, 24.856424542341138],
        [60.163009687468282, 24.856895227578235],
        [60.16271899349028, 24.857007213086252],
        [60.162762155973553, 24.857458339972947],
        [60.162812054983178, 24.857979979506027],
        [60.162828146749966, 24.858148121125438],
        [60.162850191019032, 24.858378583474725],
        [60.162720843129684, 24.85911986226137],
        [60.162707502439375, 24.859196287609489],
        [60.163495048679614, 24.858892249027445],
        [60.163575862094334, 24.858143245590437],
        [60.163612960656373, 24.857714809096887],
        [60.163906054283416, 24.855894598863472],
        [60.164046446769774, 24.855955812186213],
        [60.164186839223092, 24.856017024229232],
        [60.164150862803581, 24.855541838401933],
        [60.164180826818658, 24.855458176051773],
        [60.164437189520463, 24.855367868858668],
        [60.164560390483572, 24.855324471054423],
        [60.164569908943058, 24.855322156702346],
        [60.164579564796064, 24.855320506911578],
        [60.164589311701995, 24.855319529601726],
        [60.164599102881759, 24.855319229460289],
        [60.164608891347591, 24.855319607929228],
        [60.164618630120451, 24.855320663192284],
        [60.164628272465045, 24.855322390185389],
        [60.164637772102644, 24.855324780619409],
        [60.164647083443917, 24.855327823021977],
        [60.164656161801751, 24.855331502792975],
        [60.164664963607713, 24.855335802271835],
        [60.164673446617591, 24.855340700824851],
        [60.164681570122404, 24.855346174941584],
        [60.164689295135751, 24.855352198353099],
        [60.164696584581172, 24.855358742149289],
        [60.164703403477681, 24.855365774926209],
        [60.16470971909947, 24.855373262931192],
        [60.164715501133223, 24.855381170229226],
        [60.164720721834975, 24.855389458870111],
        [60.164842128118657, 24.855546415960845],
        [60.165034824293663, 24.85579555514213],
        [60.165048974449924, 24.855816996900948],
        [60.165061747514031, 24.855839286467507],
        [60.165073092868617, 24.85586233552112],
        [60.165082965559115, 24.855886052728234],
        [60.165091326462701, 24.855910344109851],
        [60.165098142452003, 24.855935113409878],
        [60.165103386519426, 24.855960262479257],
        [60.165194995431023, 24.855923092037568],
        [60.165153601174381, 24.855495711399911],
        [60.165141152076956, 24.855368040945194],
        [60.16604507390624, 24.855399929763689],
        [60.166330851736262, 24.855407469327176],
        [60.166649839150693, 24.855416203209426],
        [60.168280371638851, 24.855383254710347],
        [60.168531678721912, 24.855378072281066],
        [60.16956491317837, 24.855357447420484],
        [60.170914401083984, 24.844221750367453],
        [60.170505303676649, 24.844235668048235],
        [60.166019829144865, 24.844391157545449],
        [60.165974962523002, 24.844393374343525],
        [60.165719434544982, 24.84440543423219],
        [60.165584272359247, 24.84441246718259],
        [60.165421894226597, 24.844348700721454],
        [60.165244816094386, 24.844280389994623],
        [60.159015869554878, 24.841749486492027],
        [60.158092297366188, 24.841374291455246],
        [60.158098393248842, 24.852332162342929],
        [60.161329807145719, 24.852325461715054],
        [60.161500140476235, 24.852712296823213],
        [60.161536412804921, 24.853441578223574],
        [60.161407636059721, 24.854371090355006],
        [60.16148767581398, 24.854583757723073],
        [60.161510094895682, 24.854651821061513],
        [60.161598090512371, 24.854727283164252],
        [60.161586597046544, 24.85508027743823],
        [60.162130532481847, 24.85624054958485],
        [60.162198983876294, 24.856195068655534],
        [60.162617553501654, 24.855946945760863],
        [60.162588278303573, 24.855640969805144],
        [60.162685269542017, 24.855603613827039]
      ]
    ]
  ]

  const [currentCoordinates] = useState(
    coordinates ? coordinates[0][0][0] : helsinkiCenter
  )

  const crs = EPSG3879()

  const disabled = false

  return (
    <div className="geometry-input-container">
      <Map
        className={`geometry-input${disabled ? ' disabled' : ''}`}
        center={currentCoordinates}
        doubleClickZoom={false}
        scrollWheelZoom={false}
        maxZoom={18}
        zoomControl={!disabled}
        dragging={!disabled}
        zoom={7}
        minZoom={4}
        crs={crs}
        style={!disabled ? { cursor: 'pointer' } : {}}
      >
        <TileLayer
          attribution='&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
          url="https://geoserver.hel.fi/mapproxy/wmts/osm-sm-hq/etrs_tm35fin_hq/{z}/{x}/{y}.png"
        />
        <Polygon positions={formatGeoJSONToPositions(coordinates)} />
      </Map>
    </div>
  )
}

export default Geometry
